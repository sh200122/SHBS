import {
  TailwindcssPatcher,
  defuOverrideArray,
  getPatchOptions,
  logger_default
} from "./chunk-QPUWFRNR.mjs";

// src/cli.ts
import process from "node:process";
import { CONFIG_NAME, getConfig, initConfig } from "@tailwindcss-mangle/config";
import cac from "cac";
function init() {
  const cwd = process.cwd();
  return initConfig(cwd);
}
var cli = cac();
cli.command("install", "patch install").action(() => {
  const twPatcher = new TailwindcssPatcher({
    patch: getPatchOptions()
  });
  twPatcher.patch();
});
cli.command("init").action(async () => {
  await init();
  logger_default.success(`\u2728 ${CONFIG_NAME}.config.ts initialized!`);
});
cli.command("extract").action(async () => {
  const { config } = await getConfig();
  if (config) {
    const twPatcher = new TailwindcssPatcher(
      {
        patch: defuOverrideArray(config.patch, {
          resolve: {
            paths: [import.meta.url]
          }
        })
      }
    );
    const p = await twPatcher.extract();
    p && logger_default.success(`\u2728 tailwindcss-patch extract success! file path: ${p.filename}, classList length: ${p.classList.length}`);
  }
});
cli.help();
cli.parse();
