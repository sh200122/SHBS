"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }



var _chunkNS3NEDWDjs = require('../chunk-NS3NEDWD.js');
require('../chunk-LDRIZFAI.js');

// src/css-macro/postcss.ts
var creator = () => {
  return {
    postcssPlugin: "postcss-weapp-tw-css-macro-plugin",
    prepare() {
      return {
        AtRule(atRule, helper) {
          if (atRule.name === "media") {
            const values = [];
            _chunkNS3NEDWDjs.matchCustomPropertyFromValue.call(void 0, atRule.params, (arr) => {
              values.push(arr[1]);
            });
            if (values.length > 0) {
              const isNegative = atRule.params.includes("not");
              const text = values.join(" ");
              const comment = isNegative ? _chunkNS3NEDWDjs.ifndef.call(void 0, text) : _chunkNS3NEDWDjs.ifdef.call(void 0, text);
              atRule.replaceWith([
                helper.comment({
                  raws: {
                    before: "\n"
                  },
                  text: comment.start
                }),
                ..._nullishCoalesce(atRule.nodes, () => ( [])),
                // .map((x) => x.clone()),
                helper.comment({
                  raws: {
                    before: "\n"
                  },
                  text: comment.end
                })
              ]);
            }
          }
        },
        CommentExit(comment) {
          if (/#(?:ifn?def|endif)/.test(comment.text)) {
            comment.raws.left = " ";
            comment.raws.right = " ";
          }
        }
      };
    }
  };
};
creator.postcss = true;
var postcss_default = creator;


exports.default = postcss_default;

module.exports = exports.default;
