// src/wxml/shared.ts
import { escape, MappingChars2String } from "@weapp-core/escape";
function replaceWxml(original, options = {
  keepEOL: false,
  escapeMap: MappingChars2String
}) {
  const { keepEOL, escapeMap, mangleContext, ignoreHead } = options;
  let res = original;
  if (!keepEOL) {
    res = res.replaceAll(/[\n\r]+/g, "");
  }
  if (mangleContext) {
    res = mangleContext.wxmlHandler(res);
  }
  res = escape(res, {
    map: escapeMap,
    ignoreHead
  });
  return res;
}

export {
  replaceWxml
};
