{"version":3,"file":"AudioContext.js","sources":["../../../../../src/api/apis/media/audio/AudioContext.ts"],"sourcesContent":["import Taro from '@tarojs/api'\n\n/**\n * AudioContext 实例\n *\n * @canUse AudioContext\n * @__class [pause, play, seek, setSrc]\n */\nexport class AudioContext implements Taro.AudioContext {\n  Instance?: HTMLAudioElement\n\n  constructor () {\n    this.Instance = new Audio()\n\n    Taro.eventCenter.on('__taroRouterChange', () => {\n      this.stop()\n    })\n  }\n\n  get paused () {\n    return this.Instance?.paused ?? true\n  }\n\n  get src () {\n    return this.Instance?.src || ''\n  }\n\n  set src (e) {\n    this.setProperty('src', e)\n  }\n\n  private setProperty (key: string, value: unknown) {\n    if (this.Instance) {\n      this.Instance[key] = value\n    }\n  }\n\n  play = () => this.Instance?.play()\n\n  pause = () => this.Instance?.pause()\n\n  stop = () => {\n    this.pause()\n    this.seek(0)\n  }\n\n  seek = (position: number) => {\n    if (this.Instance) {\n      this.Instance.currentTime = position\n    }\n  }\n\n  setSrc = (src: string) => {\n    if (this.Instance) {\n      this.Instance.src = src\n    }\n  }\n}\n"],"names":[],"mappings":";;AAEA;;;;;AAKG;MACU,YAAY,CAAA;AAGvB,IAAA,WAAA,GAAA;AA0BA,QAAA,IAAA,CAAA,IAAI,GAAG,MAAK,EAAA,IAAA,EAAA,CAAA,CAAC,OAAA,CAAA,EAAA,GAAA,IAAI,CAAC,QAAQ,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAI,EAAE,CAAA,EAAA,CAAA;AAElC,QAAA,IAAA,CAAA,KAAK,GAAG,MAAK,EAAA,IAAA,EAAA,CAAA,CAAC,OAAA,CAAA,EAAA,GAAA,IAAI,CAAC,QAAQ,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,KAAK,EAAE,CAAA,EAAA,CAAA;QAEpC,IAAI,CAAA,IAAA,GAAG,MAAK;YACV,IAAI,CAAC,KAAK,EAAE,CAAA;AACZ,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACd,SAAC,CAAA;AAED,QAAA,IAAA,CAAA,IAAI,GAAG,CAAC,QAAgB,KAAI;AAC1B,YAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,gBAAA,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAA;aACrC;AACH,SAAC,CAAA;AAED,QAAA,IAAA,CAAA,MAAM,GAAG,CAAC,GAAW,KAAI;AACvB,YAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,gBAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAA;aACxB;AACH,SAAC,CAAA;AA5CC,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,KAAK,EAAE,CAAA;QAE3B,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,oBAAoB,EAAE,MAAK;YAC7C,IAAI,CAAC,IAAI,EAAE,CAAA;AACb,SAAC,CAAC,CAAA;KACH;AAED,IAAA,IAAI,MAAM,GAAA;;QACR,OAAO,CAAA,EAAA,GAAA,MAAA,IAAI,CAAC,QAAQ,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,MAAM,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,IAAI,CAAA;KACrC;AAED,IAAA,IAAI,GAAG,GAAA;;QACL,OAAO,CAAA,MAAA,IAAI,CAAC,QAAQ,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,GAAG,KAAI,EAAE,CAAA;KAChC;IAED,IAAI,GAAG,CAAE,CAAC,EAAA;AACR,QAAA,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;KAC3B;IAEO,WAAW,CAAE,GAAW,EAAE,KAAc,EAAA;AAC9C,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,YAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;SAC3B;KACF;AAsBF;;;;"}