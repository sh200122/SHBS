{"version":3,"file":"previewImage.js","sources":["../../../../../src/api/apis/media/image/previewImage.ts"],"sourcesContent":["import Taro from '@tarojs/taro'\n\nimport { shouldBeObject } from '../../utils'\nimport { MethodHandler } from '../../utils/handler'\nimport nativeImage from './NativeImage'\n\n/**\n * 在新页面中全屏预览图片。预览的过程中用户可以进行保存图片、发送给朋友等操作。\n *\n * @canUse previewImage\n * @__object [urls, current, showmenu]\n */\nexport const previewImage: typeof Taro.previewImage = (options) => {\n  // options must be an Object\n  const isObject = shouldBeObject(options)\n  if (!isObject.flag) {\n    const res = { errMsg: `previewImage:fail ${isObject.msg}` }\n    console.error(res.errMsg)\n    return Promise.reject(res)\n  }\n  const { urls = [], current, showmenu, success, fail, complete } = options\n  const handle = new MethodHandler({ name: 'previewImage', success, fail, complete })\n\n  return new Promise<TaroGeneral.CallbackResult>((resolve, reject) => {\n    nativeImage.previewImage({\n      urls,\n      current,\n      showmenu,\n      success: (res) => {\n        handle.success(res, { resolve, reject })\n      },\n      fail: (res) => {\n        handle.fail(res, { resolve, reject })\n      },\n    })\n  })\n}\n"],"names":[],"mappings":";;;;AAMA;;;;;AAKG;AACU,MAAA,YAAY,GAA6B,CAAC,OAAO,KAAI;;AAEhE,IAAA,MAAM,QAAQ,GAAG,cAAc,CAAC,OAAO,CAAC,CAAA;AACxC,IAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;QAClB,MAAM,GAAG,GAAG,EAAE,MAAM,EAAE,CAAqB,kBAAA,EAAA,QAAQ,CAAC,GAAG,CAAE,CAAA,EAAE,CAAA;AAC3D,QAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;AACzB,QAAA,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;KAC3B;AACD,IAAA,MAAM,EAAE,IAAI,GAAG,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAA;AACzE,IAAA,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC,EAAE,IAAI,EAAE,cAAc,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAA;IAEnF,OAAO,IAAI,OAAO,CAA6B,CAAC,OAAO,EAAE,MAAM,KAAI;QACjE,WAAW,CAAC,YAAY,CAAC;YACvB,IAAI;YACJ,OAAO;YACP,QAAQ;AACR,YAAA,OAAO,EAAE,CAAC,GAAG,KAAI;gBACf,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAA;aACzC;AACD,YAAA,IAAI,EAAE,CAAC,GAAG,KAAI;gBACZ,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAA;aACtC;AACF,SAAA,CAAC,CAAA;AACJ,KAAC,CAAC,CAAA;AACJ;;;;"}