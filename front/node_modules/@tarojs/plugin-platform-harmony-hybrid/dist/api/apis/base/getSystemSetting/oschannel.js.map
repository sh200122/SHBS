{"version":3,"file":"oschannel.js","sources":["../../../../../src/api/apis/base/getSystemSetting/oschannel.ts"],"sourcesContent":["import Taro from '@tarojs/api'\n\nlet display\nlet bluetooth\nlet geoLocationManager\nlet wifiManager\n\ntry {\n  display = requireNapi('display')\n  bluetooth = requireNapi('bluetooth')\n  geoLocationManager = requireNapi('geoLocationManager')\n  wifiManager = requireNapi('wifi')\n} catch (e) {} // eslint-disable-line no-empty\n\n// @ts-ignore\nexport const getSystemSetting: typeof Taro.getSystemSetting = () => {\n  let bluetoothEnabled: number | boolean = false\n  let locationEnabled = false\n  let wifiEnabled = false\n  let bluetoothError = ''\n  let locationError = ''\n  try {\n    bluetoothEnabled = bluetooth.getState()\n    bluetoothEnabled = bluetoothEnabled === 2 || bluetoothEnabled === 5\n  } catch (err) {\n    console.error('errCode:' + err.code + ',errMessage:' + err.message)\n    bluetoothError = err.message\n  }\n  try {\n    locationEnabled = geoLocationManager.isLocationEnabled()\n  } catch (err) {\n    console.error('errCode:' + err.code + ',errMessage:' + err.message)\n    locationError = err.message\n  }\n  try {\n    wifiEnabled = wifiManager.isWifiActive()\n  } catch (err) {\n    console.error('errCode:' + err.code + ',errMessage:' + err.message)\n  }\n  // @ts-ignore\n  const { rotation } = display.getDefaultDisplaySync()\n  const deviceOrientation = rotation === 1 || rotation === 3 ? 'landscape' : 'portrait'\n  return {\n    bluetoothEnabled,\n    bluetoothError,\n    locationEnabled,\n    locationError,\n    wifiEnabled,\n    deviceOrientation,\n  }\n}\n"],"names":[],"mappings":"AAEA,IAAI,OAAO,CAAA;AACX,IAAI,SAAS,CAAA;AACb,IAAI,kBAAkB,CAAA;AACtB,IAAI,WAAW,CAAA;AAEf,IAAI;AACF,IAAA,OAAO,GAAG,WAAW,CAAC,SAAS,CAAC,CAAA;AAChC,IAAA,SAAS,GAAG,WAAW,CAAC,WAAW,CAAC,CAAA;AACpC,IAAA,kBAAkB,GAAG,WAAW,CAAC,oBAAoB,CAAC,CAAA;AACtD,IAAA,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC,CAAA;AACnC,CAAC;AAAC,OAAO,CAAC,EAAE,GAAE;AAEd;AACO,MAAM,gBAAgB,GAAiC,MAAK;IACjE,IAAI,gBAAgB,GAAqB,KAAK,CAAA;IAC9C,IAAI,eAAe,GAAG,KAAK,CAAA;IAC3B,IAAI,WAAW,GAAG,KAAK,CAAA;IACvB,IAAI,cAAc,GAAG,EAAE,CAAA;IACvB,IAAI,aAAa,GAAG,EAAE,CAAA;AACtB,IAAA,IAAI;AACF,QAAA,gBAAgB,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAA;QACvC,gBAAgB,GAAG,gBAAgB,KAAK,CAAC,IAAI,gBAAgB,KAAK,CAAC,CAAA;KACpE;IAAC,OAAO,GAAG,EAAE;AACZ,QAAA,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,GAAG,cAAc,GAAG,GAAG,CAAC,OAAO,CAAC,CAAA;AACnE,QAAA,cAAc,GAAG,GAAG,CAAC,OAAO,CAAA;KAC7B;AACD,IAAA,IAAI;AACF,QAAA,eAAe,GAAG,kBAAkB,CAAC,iBAAiB,EAAE,CAAA;KACzD;IAAC,OAAO,GAAG,EAAE;AACZ,QAAA,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,GAAG,cAAc,GAAG,GAAG,CAAC,OAAO,CAAC,CAAA;AACnE,QAAA,aAAa,GAAG,GAAG,CAAC,OAAO,CAAA;KAC5B;AACD,IAAA,IAAI;AACF,QAAA,WAAW,GAAG,WAAW,CAAC,YAAY,EAAE,CAAA;KACzC;IAAC,OAAO,GAAG,EAAE;AACZ,QAAA,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,GAAG,cAAc,GAAG,GAAG,CAAC,OAAO,CAAC,CAAA;KACpE;;IAED,MAAM,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAA;AACpD,IAAA,MAAM,iBAAiB,GAAG,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,GAAG,WAAW,GAAG,UAAU,CAAA;IACrF,OAAO;QACL,gBAAgB;QAChB,cAAc;QACd,eAAe;QACf,aAAa;QACb,WAAW;QACX,iBAAiB;KAClB,CAAA;AACH;;;;"}