{"version":3,"file":"setBackgroundFetchToken.js","sources":["../../../../src/api/apis/storage/setBackgroundFetchToken.ts"],"sourcesContent":["import Taro from '@tarojs/taro'\nimport { getParameterError, shouldBeObject } from 'src/api/apis/utils'\nimport { MethodHandler } from 'src/api/apis/utils/handler'\n\nimport native from '../NativeApi'\n\n/**\n * 拉取 backgroundFetch 客户端缓存数据\n *\n * @canUse setBackgroundFetchToken\n * @__object [token]\n */\nexport const setBackgroundFetchToken: typeof Taro.setBackgroundFetchToken = function (options) {\n  const name = 'setBackgroundFetchToken'\n\n  // options must be an Object\n  const isObject = shouldBeObject(options)\n  // if (!isObject.flag) {\n  //   const res = { errMsg: `${name}:fail ${isObject.msg}` }\n  //   console.error(res.errMsg)\n  //   return\n  // }\n\n  const { token, success, fail, complete } = options as Exclude<typeof options, undefined>\n  const handle = new MethodHandler({ name, success, fail, complete })\n\n  // token must be String\n  if (!isObject.flag || typeof token !== 'string') {\n    return handle.fail<TaroGeneral.CallbackResult>({\n      errMsg: getParameterError({\n        para: 'token',\n        correct: 'string',\n        wrong: token,\n      }),\n    })\n  }\n\n  return new Promise<TaroGeneral.CallbackResult>((resolve, reject) => {\n    native.setStorage({\n      key: 'setStorageSync',\n      data: 'token',\n      success: (res: any) => {\n        handle.success({ errMsg: res.errMsg }, { resolve, reject })\n      },\n      fail: (err: any) => {\n        handle.fail({ errMsg: err.errMsg }, { resolve, reject })\n      },\n    })\n  })\n}\n"],"names":[],"mappings":";;;;AAMA;;;;;AAKG;AACI,MAAM,uBAAuB,GAAwC,UAAU,OAAO,EAAA;IAC3F,MAAM,IAAI,GAAG,yBAAyB,CAAA;;AAGtC,IAAA,MAAM,QAAQ,GAAG,cAAc,CAAC,OAAO,CAAC,CAAA;;;;;;IAOxC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAA6C,CAAA;AACxF,IAAA,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAA;;IAGnE,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QAC/C,OAAO,MAAM,CAAC,IAAI,CAA6B;YAC7C,MAAM,EAAE,iBAAiB,CAAC;AACxB,gBAAA,IAAI,EAAE,OAAO;AACb,gBAAA,OAAO,EAAE,QAAQ;AACjB,gBAAA,KAAK,EAAE,KAAK;aACb,CAAC;AACH,SAAA,CAAC,CAAA;KACH;IAED,OAAO,IAAI,OAAO,CAA6B,CAAC,OAAO,EAAE,MAAM,KAAI;QACjE,MAAM,CAAC,UAAU,CAAC;AAChB,YAAA,GAAG,EAAE,gBAAgB;AACrB,YAAA,IAAI,EAAE,OAAO;AACb,YAAA,OAAO,EAAE,CAAC,GAAQ,KAAI;AACpB,gBAAA,MAAM,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAA;aAC5D;AACD,YAAA,IAAI,EAAE,CAAC,GAAQ,KAAI;AACjB,gBAAA,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAA;aACzD;AACF,SAAA,CAAC,CAAA;AACJ,KAAC,CAAC,CAAA;AACJ;;;;"}