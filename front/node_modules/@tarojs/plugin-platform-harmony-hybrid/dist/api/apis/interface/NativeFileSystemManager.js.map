{"version":3,"file":"NativeFileSystemManager.js","sources":["../../../../src/api/apis/interface/NativeFileSystemManager.ts"],"sourcesContent":["import Taro from '@tarojs/api'\nimport { toByteArray } from 'base64-js'\n\nimport native from '../NativeApi'\n\nexport class NativeFileSystemManager implements Taro.FileSystemManager {\n  private static nativeFileSystemManager: NativeFileSystemManager\n\n  constructor () {\n    native.getFileManager()\n  }\n\n  static getFileSystemManager () {\n    if (!NativeFileSystemManager.nativeFileSystemManager) {\n      NativeFileSystemManager.nativeFileSystemManager = new NativeFileSystemManager()\n    }\n    return NativeFileSystemManager.nativeFileSystemManager\n  }\n\n  access (option: any): void {\n    native.access(option)\n  }\n\n  getFileInfo (option: any): any {\n    native.getFileInformation(option)\n  }\n\n  readFile (option: any): any {\n    native.readFile({\n      ...(option || {}),\n      success: (res) => {\n        const result = {\n          data: res?.bufBase64 !== undefined ? toByteArray(res.bufBase64).buffer : res?.result,\n        }\n        option?.success && option.success(result)\n        option?.complete && option.complete(result)\n      },\n      fail: (res) => {\n        option?.fail && option.fail(res)\n        option?.complete && option.complete(res)\n      },\n    })\n  }\n\n  readFileSync (filePath: string, encoding?: string, position?: number, length?: number): any {\n    const data = native.readFileSync({\n      filePath,\n      encoding,\n      position,\n      length,\n    })\n    if (data?.error) {\n      throw data.error\n    }\n    return data?.bufBase64 !== undefined ? toByteArray(data.bufBase64).buffer : data?.result\n  }\n\n  accessSync (option: any): any {\n    return option\n  }\n\n  appendFile (option: any): any {\n    return option\n  }\n\n  appendFileSync (option: any): any {\n    return option\n  }\n\n  close (option: any): any {\n    return option\n  }\n\n  closeSync (option: any): any {\n    return option\n  }\n\n  copyFile (option: any): any {\n    return option\n  }\n\n  copyFileSync (option: any): any {\n    return option\n  }\n\n  fstat (option: any): any {\n    return option\n  }\n\n  fstatSync (option: any): any {\n    return option\n  }\n\n  ftruncate (option: any): any {\n    return option\n  }\n\n  ftruncateSync (option: any): any {\n    return option\n  }\n\n  getSavedFileList (option: any): any {\n    return option\n  }\n\n  mkdir (option: any): any {\n    return option\n  }\n\n  mkdirSync (option: any): any {\n    return option\n  }\n\n  open (option: any): any {\n    return option\n  }\n\n  openSync (option: any): any {\n    return option\n  }\n\n  read (option: any): any {\n    return option\n  }\n\n  readCompressedFile (option: any): any {\n    return option\n  }\n\n  readCompressedFileSync (option: any): any {\n    return option\n  }\n\n  readSync (option: any): any {\n    return option\n  }\n\n  readZipEntry (option: any): any {\n    return option\n  }\n\n  readdir (option: any): any {\n    return option\n  }\n\n  readdirSync (option: any): any {\n    return option\n  }\n\n  removeSavedFile (option: any): any {\n    return option\n  }\n\n  rename (option: any): any {\n    return option\n  }\n\n  renameSync (option: any): any {\n    return option\n  }\n\n  rmdir (option: any): any {\n    return option\n  }\n\n  rmdirSync (option: any): any {\n    return option\n  }\n\n  saveFile (option: any): any {\n    return option\n  }\n\n  saveFileSync (option: any): any {\n    return option\n  }\n\n  stat (option: any): any {\n    return option\n  }\n\n  statSync (option: any): any {\n    return option\n  }\n\n  truncate (option: any): any {\n    return option\n  }\n\n  truncateSync (option: any): any {\n    return option\n  }\n\n  unlink (option: any): any {\n    return option\n  }\n\n  unlinkSync (option: any): any {\n    return option\n  }\n\n  unzip (option: any): any {\n    return option\n  }\n\n  write (option: any): any {\n    return option\n  }\n\n  writeFile (option: any): any {\n    return option\n  }\n\n  writeFileSync (option: any): any {\n    return option\n  }\n\n  writeSync (option: any): any {\n    return option\n  }\n}\n"],"names":[],"mappings":"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"}