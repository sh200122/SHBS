{"version":3,"file":"onLocationChange.js","sources":["../../../../src/api/apis/location/onLocationChange.ts"],"sourcesContent":["import Taro from '@tarojs/taro'\nimport { shouldBeFunction } from 'src/api/apis/utils'\n\nimport nativeLocation from './NativeLocation'\n\n/**\n * 监听实时地理位置变化事件\n *\n * @canUse onLocationChange\n * @__callback [accuracy, altitude, horizontalAccuracy, atitude, longitude, speed, verticalAccuracy]\n */\nexport const onLocationChange: typeof Taro.onLocationChange = (callback) => {\n  const name = 'onLocationChange'\n  // callback must be an Function\n  const isFunction = shouldBeFunction(callback)\n  if (!isFunction.flag) {\n    const res = { errMsg: `${name}:fail ${isFunction.msg}` }\n    console.error(res.errMsg)\n    return\n  }\n  nativeLocation.onLocationChange((res: any) => {\n    const result: Taro.onLocationChange.CallbackResult = {\n      /** 位置的精确度 */\n      accuracy: res.accuracy,\n      /** 高度，单位 m */\n      altitude: res.altitude,\n      /** 水平精度，单位 m */\n      horizontalAccuracy: res.accuracy,\n      /** 纬度，范围为 -90~90，负数表示南纬 */\n      latitude: res.latitude,\n      /** 经度，范围为 -180~180，负数表示西经 */\n      longitude: res.longitude,\n      /** 速度，单位 m/s */\n      speed: res.speed,\n      /** 垂直精度，单位 m */\n      verticalAccuracy: res.accuracy,\n    }\n    callback(result)\n  })\n}\n"],"names":[],"mappings":";;;AAKA;;;;;AAKG;AACU,MAAA,gBAAgB,GAAiC,CAAC,QAAQ,KAAI;IACzE,MAAM,IAAI,GAAG,kBAAkB,CAAA;;AAE/B,IAAA,MAAM,UAAU,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAA;AAC7C,IAAA,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;AACpB,QAAA,MAAM,GAAG,GAAG,EAAE,MAAM,EAAE,CAAA,EAAG,IAAI,CAAA,MAAA,EAAS,UAAU,CAAC,GAAG,CAAA,CAAE,EAAE,CAAA;AACxD,QAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;QACzB,OAAM;KACP;AACD,IAAA,cAAc,CAAC,gBAAgB,CAAC,CAAC,GAAQ,KAAI;AAC3C,QAAA,MAAM,MAAM,GAAyC;;YAEnD,QAAQ,EAAE,GAAG,CAAC,QAAQ;;YAEtB,QAAQ,EAAE,GAAG,CAAC,QAAQ;;YAEtB,kBAAkB,EAAE,GAAG,CAAC,QAAQ;;YAEhC,QAAQ,EAAE,GAAG,CAAC,QAAQ;;YAEtB,SAAS,EAAE,GAAG,CAAC,SAAS;;YAExB,KAAK,EAAE,GAAG,CAAC,KAAK;;YAEhB,gBAAgB,EAAE,GAAG,CAAC,QAAQ;SAC/B,CAAA;QACD,QAAQ,CAAC,MAAM,CAAC,CAAA;AAClB,KAAC,CAAC,CAAA;AACJ;;;;"}