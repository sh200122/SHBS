{"version":3,"file":"onUserCaptureScreen.js","sources":["../../../../../src/api/apis/device/screen/onUserCaptureScreen.ts"],"sourcesContent":["import Taro from '@tarojs/taro'\n\nimport native from '../../NativeApi'\nimport { shouldBeFunction } from '../../utils'\nimport { taroCallbackMap } from '../../utils/callbakMap'\n\n/**\n * 监听用户主动截屏事件，用户使用系统截屏按键截屏时触发此事件\n *\n * @canUse onUserCaptureScreen\n */\nexport const onUserCaptureScreen: typeof Taro.onUserCaptureScreen = (callback) => {\n  const name = 'onUserCaptureScreen'\n\n  // callback must be an Function\n  const isFunction = shouldBeFunction(callback)\n  if (!isFunction.flag) {\n    const res = { errMsg: `${name}:fail ${isFunction.msg}` }\n    console.error(res.errMsg)\n    return\n  }\n\n  try {\n    if (!taroCallbackMap.has(callback)) {\n      // eslint-disable-next-line no-inner-declarations\n      function newCallback (res: any) {\n        const result: TaroGeneral.CallbackResult = {\n          errMsg: res === 'ohos not support path' ? `${name}:ok` : JSON.stringify(res),\n        }\n        callback(result)\n      }\n      taroCallbackMap.set(callback, newCallback)\n      native.onUserCaptureScreen(newCallback)\n    }\n  } catch (exception) {\n    console.error(JSON.stringify(exception))\n  }\n}\n"],"names":[],"mappings":";;;;AAMA;;;;AAIG;AACU,MAAA,mBAAmB,GAAoC,CAAC,QAAQ,KAAI;IAC/E,MAAM,IAAI,GAAG,qBAAqB,CAAA;;AAGlC,IAAA,MAAM,UAAU,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAA;AAC7C,IAAA,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;AACpB,QAAA,MAAM,GAAG,GAAG,EAAE,MAAM,EAAE,CAAA,EAAG,IAAI,CAAA,MAAA,EAAS,UAAU,CAAC,GAAG,CAAA,CAAE,EAAE,CAAA;AACxD,QAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;QACzB,OAAM;KACP;AAED,IAAA,IAAI;QACF,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;;YAElC,SAAS,WAAW,CAAE,GAAQ,EAAA;AAC5B,gBAAA,MAAM,MAAM,GAA+B;AACzC,oBAAA,MAAM,EAAE,GAAG,KAAK,uBAAuB,GAAG,CAAG,EAAA,IAAI,CAAK,GAAA,CAAA,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;iBAC7E,CAAA;gBACD,QAAQ,CAAC,MAAM,CAAC,CAAA;aACjB;AACD,YAAA,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAA;AAC1C,YAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAA;SACxC;KACF;IAAC,OAAO,SAAS,EAAE;QAClB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAA;KACzC;AACH;;;;"}