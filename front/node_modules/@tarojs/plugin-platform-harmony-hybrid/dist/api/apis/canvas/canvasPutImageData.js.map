{"version":3,"file":"canvasPutImageData.js","sources":["../../../../src/api/apis/canvas/canvasPutImageData.ts"],"sourcesContent":["import Taro from '@tarojs/api'\n\nimport { findDOM } from '../utils'\nimport { MethodHandler } from '../utils/handler'\n\n/**\n * 将像素数据绘制到画布\n *\n * @canUse canvasPutImageData\n * @__object [canvasId, data, x, y]\n */\nexport const canvasPutImageData: typeof Taro.canvasPutImageData = (\n  { canvasId, data, x, y, success, fail, complete },\n  inst\n) => {\n  const handle = new MethodHandler({ name: 'canvasPutImageData', success, fail, complete })\n  const el = findDOM(inst) as HTMLElement\n  const canvas = el?.querySelector(`canvas[canvas-id=\"${canvasId}\"]`) as HTMLCanvasElement\n\n  try {\n    const ctx = canvas.getContext('2d')\n    // TODO Uint8ClampedArray => ImageData\n    ctx?.putImageData(data as unknown as ImageData, x, y)\n    return handle.success()\n  } catch (e) {\n    return handle.fail({\n      errMsg: e.message,\n    })\n  }\n}\n"],"names":[],"mappings":";;;AAKA;;;;;AAKG;MACU,kBAAkB,GAAmC,CAChE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjD,IAAI,KACF;AACF,IAAA,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC,EAAE,IAAI,EAAE,oBAAoB,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAA;AACzF,IAAA,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAgB,CAAA;AACvC,IAAA,MAAM,MAAM,GAAG,EAAE,KAAA,IAAA,IAAF,EAAE,KAAF,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAE,CAAE,aAAa,CAAC,CAAA,kBAAA,EAAqB,QAAQ,CAAA,EAAA,CAAI,CAAsB,CAAA;AAExF,IAAA,IAAI;QACF,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;;AAEnC,QAAA,GAAG,KAAH,IAAA,IAAA,GAAG,KAAH,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,GAAG,CAAE,YAAY,CAAC,IAA4B,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AACrD,QAAA,OAAO,MAAM,CAAC,OAAO,EAAE,CAAA;KACxB;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,MAAM,CAAC,IAAI,CAAC;YACjB,MAAM,EAAE,CAAC,CAAC,OAAO;AAClB,SAAA,CAAC,CAAA;KACH;AACH;;;;"}