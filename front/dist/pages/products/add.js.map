{"version":3,"file":"pages/products/add.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://myApp/./src/pages/products/add.tsx?f349","webpack://myApp/._src_pages_products_add.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Input, Text, Label, Textarea, Form, View, Image } from \"@tarojs/components\";\nimport Taro from \"@tarojs/taro\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function add(_ref) {\n  let {} = _ref;\n  const [formData, setFormData] = useState({\n    image: \"\",\n    name: \"\",\n    price: \"\",\n    description: \"\"\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.image || !formData.name || !formData.price) {\n      Taro.showToast({\n        title: '请填写必选项',\n        icon: 'error',\n        duration: 2000\n      });\n      return;\n    }\n    const adminInfo = Taro.getStorageSync('adminInfo');\n    try {\n      const res = await Taro.request({\n        url: \"http://localhost:5000/api/product/add\",\n        method: \"POST\",\n        header: {\n          'admin-id': adminInfo._id\n        },\n        data: formData\n      });\n      if (res.statusCode === 201) {\n        setFormData({\n          image: \"\",\n          name: \"\",\n          price: \"\",\n          description: \"\"\n        });\n        Taro.showToast({\n          title: \"添加成功\",\n          icon: \"success\"\n        });\n        setTimeout(() => {\n          Taro.reLaunch({\n            url: \"/pages/products/index\"\n          });\n        }, 1000);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleChooseImage = async () => {\n    try {\n      const res = await Taro.chooseImage({\n        count: 1,\n        sizeType: [\"compressed\"],\n        sourceType: [\"album\", \"camera\"]\n      });\n      setFormData({\n        ...formData,\n        image: res.tempFilePaths[0]\n      });\n    } catch (error) {\n      console.log(error);\n      Taro.showToast({\n        title: '添加失败',\n        icon: 'error'\n      });\n    }\n  };\n  const handleCancel = () => {\n    Taro.reLaunch({\n      url: \"/pages/products/index\"\n    });\n  };\n  return /*#__PURE__*/_jsx(\"view\", {\n    className: \"w-screen h-screen bg-[#e8e8e8] flex items-center justify-center p-4\",\n    children: /*#__PURE__*/_jsxs(Form, {\n      onSubmit: handleSubmit,\n      className: \"w-full max-w-lg h-auto bg-white rounded-lg shadow-lg p-6 space-y-4\",\n      children: [/*#__PURE__*/_jsx(Text, {\n        className: \"text-2xl font-bold block text-center mb-6\",\n        children: \"\\u6DFB\\u52A0\\u95F2\\u7F6E\"\n      }), /*#__PURE__*/_jsx(Label, {\n        className: \"block text-gray-700 text-sm font-bold\",\n        children: \"\\u56FE\\u7247:\"\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"w-full flex flex-col items-center space-y-2\",\n        children: formData.image ? /*#__PURE__*/_jsx(Image, {\n          src: formData.image,\n          className: \"w-full h-full max-w-[300px] max-h-[300px] object-contain rounded\",\n          mode: \"widthFix\"\n        }) : /*#__PURE__*/_jsx(View, {\n          className: \"w-32 h-32 bg-gray-200 rounded flex items-center justify-center cursor-pointer hover:bg-gray-300\",\n          onClick: handleChooseImage,\n          children: /*#__PURE__*/_jsx(Text, {\n            className: \"text-gray-500 text-2xl\",\n            children: \"+\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(Label, {\n        className: \"block text-gray-700 text-sm font-bold mt-1\",\n        children: \"\\u5546\\u54C1:\"\n      }), /*#__PURE__*/_jsx(Input, {\n        name: \"name\",\n        type: \"text\",\n        value: formData.name,\n        onInput: e => setFormData({\n          ...formData,\n          name: e.detail.value\n        }),\n        className: \"w-full h-[50px] border-solid border-[1px] p-2 border-gray-300 rounded\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5546\\u54C1\"\n      }), /*#__PURE__*/_jsx(Label, {\n        className: \"block text-gray-700 text-sm font-bold mt-1\",\n        children: \"\\u4EF7\\u683C:\"\n      }), /*#__PURE__*/_jsx(Input, {\n        name: \"price\",\n        type: \"number\",\n        value: formData.price,\n        onInput: e => setFormData({\n          ...formData,\n          price: e.detail.value\n        }),\n        className: \"w-full h-[50px] border-solid border-[1px] p-2 border-gray-300 rounded\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u4EF7\\u683C\"\n      }), /*#__PURE__*/_jsx(Label, {\n        className: \"block text-gray-700 text-sm font-bold mt-1\",\n        children: \"\\u63CF\\u8FF0:\"\n      }), /*#__PURE__*/_jsx(Textarea, {\n        name: \"description\",\n        value: formData.description,\n        onInput: e => setFormData({\n          ...formData,\n          description: e.detail.value\n        }),\n        className: \"w-full h-[100px] border-solid border-[1px] p-2 border-gray-300 rounded\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u63CF\\u8FF0...\"\n      }), /*#__PURE__*/_jsx(Button, {\n        className: \"w-full bg-[#fbb713] text-white h-12 rounded mt-6\",\n        hoverClass: \"bg-[#a3770c]\",\n        formType: \"submit\",\n        children: \"\\u4FDD\\u5B58\"\n      }), /*#__PURE__*/_jsx(Button, {\n        className: \"w-full bg-red-500 text-white h-12 rounded mt-4\",\n        hoverClass: \"bg-red-600\",\n        onClick: handleCancel,\n        children: \"\\u53D6\\u6D88\"\n      })]\n    })\n  });\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/products/add!./add.tsx\"\nvar config = {};\n\n\n\nvar taroOption = createPageConfig(component, 'pages/products/add', {root:{cn:[]}}, config || {})\nif (component && component.behaviors) {\n  taroOption.behaviors = (taroOption.behaviors || []).concat(component.behaviors)\n}\nvar inst = Page(taroOption)\n\n\n\nexport default component\n"],"names":[],"sourceRoot":""}