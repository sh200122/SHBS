{"version":3,"file":"pages/classify/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://myApp/./src/pages/classify/index.tsx?7733","webpack://myApp/._src_pages_classify_index.tsx"],"sourcesContent":["import { View, Text, Button, Image } from \"@tarojs/components\";\nimport Header from \"@/components/Header\";\nimport Footer from \"@/components/Footer\";\nimport Taro from \"@tarojs/taro\";\nimport { useState, useEffect } from \"react\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Products(_ref) {\n  let {} = _ref;\n  const [products, setProducts] = useState([]);\n  const getAdminInfo = () => {\n    return Taro.getStorageSync('adminInfo') || {};\n  };\n  useEffect(() => {\n    const adminInfo = getAdminInfo();\n    Taro.request({\n      url: \"http://localhost:5000/api/product/admin\",\n      method: \"GET\",\n      header: {\n        'admin-id': adminInfo._id\n      },\n      success: res => {\n        setProducts(res.data);\n      },\n      fail: err => {\n        console.log(err);\n      }\n    });\n  }, []);\n  const handleDeleteProduct = product => {\n    const adminInfo = getAdminInfo();\n    Taro.showModal({\n      title: \"确认删除\",\n      content: `确定要删除 ${product.name} 吗？`,\n      success: function (res) {\n        if (res.confirm) {\n          Taro.request({\n            url: `http://localhost:5000/api/product/${product._id}`,\n            method: \"DELETE\",\n            header: {\n              'admin-id': adminInfo._id\n            },\n            success: () => {\n              setProducts(products.filter(p => p._id !== product._id));\n              Taro.showToast({\n                title: \"删除成功\",\n                icon: \"success\",\n                duration: 2000\n              });\n            },\n            fail: err => {\n              console.log(err);\n              Taro.showToast({\n                title: \"删除失败\",\n                icon: \"error\",\n                duration: 2000\n              });\n            }\n          });\n        }\n      }\n    });\n  };\n  const handleAddProduct = () => {\n    Taro.reLaunch({\n      url: \"/pages/products/add\"\n    });\n  };\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"w-screen h-screen\",\n    children: [/*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(View, {\n      className: \"fixed top-[89%] left-0 right-0 h-[6%] p-2 flex justify-center items-center bg-[#f3f4f6]\",\n      children: /*#__PURE__*/_jsx(Button, {\n        className: \"bg-[#fbb713] text-white rounded-md w-full h-full flex justify-center items-center shadow-md\",\n        hoverClass: \"bg-yellow-500\",\n        onClick: handleAddProduct,\n        children: /*#__PURE__*/_jsx(Text, {\n          className: \"text-white text-center\",\n          children: \"\\u6DFB\\u52A0\\u95F2\\u7F6E\"\n        })\n      })\n    }), /*#__PURE__*/_jsx(View, {\n      className: \"fixed top-[11%] left-0 right-0 h-[78%] bg-gray-100 flex flex-col overflow-y-scroll p-4\",\n      children: products.length === 0 ? /*#__PURE__*/_jsx(Text, {\n        className: \"text-gray-500 text-center absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\",\n        children: \"\\u60A8\\u8FD8\\u6CA1\\u6709\\u95F2\\u7F6E\\u4EFB\\u4F55\\u7269\\u54C1\\uFF0C\\u8BF7\\u5148\\u6DFB\\u52A0\\u95F2\\u7F6E~\"\n      }) : /*#__PURE__*/_jsx(View, {\n        className: \"flex flex-col gap-4\",\n        children: products.map(product => /*#__PURE__*/_jsxs(View, {\n          className: \"bg-white rounded-lg p-4 flex gap-2\",\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: product.image,\n            className: \"w-full h-full max-w-[300px] max-h-[300px] object-contain rounded\",\n            mode: \"widthFix\"\n          }), /*#__PURE__*/_jsxs(View, {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsx(Text, {\n              className: \"text-lg font-bold\",\n              children: product.name\n            }), /*#__PURE__*/_jsx(Text, {\n              className: \"text-sm text-gray-500\",\n              children: product.description\n            }), /*#__PURE__*/_jsxs(Text, {\n              className: \"text-sm text-gray-500\",\n              children: [product.price, \"\\uFFE5\"]\n            }), /*#__PURE__*/_jsxs(View, {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsx(Button, {\n                className: \"bg-[#fbb713] text-white\",\n                hoverClass: \"bg-[#a3770c]\",\n                onClick: () => Taro.reLaunch({\n                  url: `/pages/products/edit?id=${product._id}`\n                }),\n                children: \"\\u7F16\\u8F91\"\n              }), /*#__PURE__*/_jsx(Button, {\n                className: \"bg-red-500 text-white\",\n                hoverClass: \"bg-red-600\",\n                onClick: () => handleDeleteProduct(product),\n                children: \"\\u5220\\u9664\"\n              })]\n            })]\n          })]\n        }, product._id))\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/classify/index!./index.tsx\"\nvar config = {};\n\n\n\nvar taroOption = createPageConfig(component, 'pages/classify/index', {root:{cn:[]}}, config || {})\nif (component && component.behaviors) {\n  taroOption.behaviors = (taroOption.behaviors || []).concat(component.behaviors)\n}\nvar inst = Page(taroOption)\n\n\n\nexport default component\n"],"names":[],"sourceRoot":""}